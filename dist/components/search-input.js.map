{"version":3,"file":"search-input.js","sources":["../../src/components/search-input.hbs","../../src/components/search-input.js"],"sourcesContent":["import { precompileTemplate } from \"@ember/template-compilation\";\nexport default precompileTemplate(\"{{!-- template-lint-disable link-rel-noopener no-action no-curly-component-invocation --}}\\n{{#if this.searchService.index}}\\n  <input\\n    id=\\\"search-input\\\"\\n    type=\\\"search\\\"\\n    value={{this.value}}\\n    oninput={{perform this.search value=\\\"target.value\\\"}}\\n    placeholder=\\\"Search the guides\\\"\\n    autocomplete=\\\"off\\\"\\n    onfocus={{action \\\"onfocus\\\"}}\\n    onblur={{action \\\"onblur\\\"}}\\n    data-test-search-input\\n  >\\n\\n  {{!-- Search results dropdown --}}\\n  <EmberTether @target=\\\"#search-input\\\" @targetAttachment=\\\"bottom right\\\" @attachment=\\\"top right\\\" @constraints={{this._resultTetherConstraints}} @class=\\\"ds-dropdown-results\\\">\\n    {{#if this.showDropdown}}\\n      <div class=\\\"ds-suggestions ds-dropdown-menu\\\">\\n        <DropdownHeader>\\n          Search Results\\n        </DropdownHeader>\\n\\n        {{#each this.searchService.results as |result|}}\\n          <SearchResult @result={{result}} />\\n        {{else}}\\n          <div class=\\\"algolia-docsearch-suggestion\\\">\\n            <div class=\\\"algolia-docsearch-suggestion--noresults\\\">\\n              <p>\\n                No results found.\\n                {{#if this.deprecationsGuideURL}}\\n                  Try searching the <a href={{this.deprecationsGuideURL}} target=\\\"_deprecations\\\">deprecations guide</a>.\\n                {{/if}}\\n              </p>\\n            </div>\\n          </div>\\n        {{/each}}\\n        <div class=\\\"powered-by-algolia\\\">\\n          <a href=\\\"https://www.algolia.com/\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">\\n            <img src=\\\"/images/logos/search-by-algolia.svg\\\" alt=\\\"Search Powered by Algolia\\\">\\n          </a>\\n        </div>\\n      </div>\\n    {{/if}}\\n  </EmberTether>\\n{{/if}}\\n\")","/* eslint-disable ember/no-classic-components, ember/no-computed-properties-in-native-classes, ember/require-tagless-components */\nimport { inject as service } from '@ember/service';\nimport { and } from '@ember/object/computed';\nimport { getOwner } from '@ember/application';\nimport Component from '@ember/component';\nimport { set, action } from '@ember/object';\nimport { restartableTask, task, timeout } from 'ember-concurrency';\n\nconst SEARCH_DEBOUNCE_PERIOD = 300;\nconst SEARCH_CLOSE_PERIOD = 200;\n\nexport default class SearchInput extends Component {\n  @service('search')\n  searchService;\n\n  _resultTetherConstraints = Object.freeze([\n    {\n      to: 'window',\n      pin: ['left', 'right'],\n    },\n  ]);\n\n  _focused = false;\n\n  constructor() {\n    super(...arguments);\n    const config = getOwner(this).resolveRegistration('config:environment');\n    this.deprecationsGuideURL = config['deprecationsGuideURL'];\n  }\n\n  @and('query', '_focused')\n  showDropdown;\n\n  search = restartableTask(async (query) => {\n    await timeout(SEARCH_DEBOUNCE_PERIOD);\n\n    set(this, 'query', query);\n\n    // Hide and don't run query if there's no search query\n    if (!query) {\n      return set(this, '_focused', false);\n    }\n\n    // ensure search results are visible if the menu was previously closed above\n    set(this, '_focused', true);\n\n    await this.searchService.search.perform(query, this.projectVersion);\n  });\n\n  closeMenu = task(async () => {\n    await timeout(SEARCH_CLOSE_PERIOD);\n\n    set(this, '_focused', false);\n  });\n\n  @action\n  onfocus() {\n    set(this, '_focused', true);\n  }\n\n  @action\n  onblur() {\n    this.closeMenu.perform();\n  }\n}\n"],"names":["SEARCH_DEBOUNCE_PERIOD","SEARCH_CLOSE_PERIOD","SearchInput","Component","g","this","prototype","service","i","void 0","_resultTetherConstraints","Object","freeze","to","pin","_focused","constructor","arguments","config","getOwner","resolveRegistration","deprecationsGuideURL","and","search","_buildTask","context","generator","query","timeout","set","searchService","perform","projectVersion","closeMenu","onfocus","n","action","onblur","setComponentTemplate","TEMPLATE"],"mappings":";;;;;;;;;;AACA,eAAe,kBAAkB,CAAC,qrDAAqrD;;ACOvtD,MAAMA,sBAAsB,GAAG,GAAG;AAClC,MAAMC,mBAAmB,GAAG,GAAG;AAEhB,MAAMC,WAAW,SAASC,SAAS,CAAC;AAAA,EAAA;IAAAC,CAAA,CAAAC,IAAA,CAAAC,SAAA,oBAChDC,MAAO,CAAC,QAAQ,CAAC,CAAA,CAAA;AAAA;AAAA,EAAA,cAAA,IAAAC,CAAA,CAAAH,IAAA,oBAAAI,MAAA;AAGlBC,EAAAA,wBAAwB,GAAGC,MAAM,CAACC,MAAM,CAAC,CACvC;AACEC,IAAAA,EAAE,EAAE,QAAQ;AACZC,IAAAA,GAAG,EAAE,CAAC,MAAM,EAAE,OAAO;AACvB,GAAC,CACF,CAAC;AAEFC,EAAAA,QAAQ,GAAG,KAAK;AAEhBC,EAAAA,WAAWA,GAAG;IACZ,KAAK,CAAC,GAAGC,SAAS,CAAC;IACnB,MAAMC,MAAM,GAAGC,QAAQ,CAAC,IAAI,CAAC,CAACC,mBAAmB,CAAC,oBAAoB,CAAC;AACvE,IAAA,IAAI,CAACC,oBAAoB,GAAGH,MAAM,CAAC,sBAAsB,CAAC;AAC5D,EAAA;AAAC,EAAA;IAAAd,CAAA,CAAAC,IAAA,CAAAC,SAAA,EAAA,cAAA,EAAA,CAEAgB,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAA,CAAA;AAAA;AAAA,EAAA,aAAA,IAAAd,CAAA,CAAAH,IAAA,mBAAAI,MAAA;AAGzBc,EAAAA,MAAM,GAAAC,SAAA,CAAA,OAAA;IAAAC,OAAA,EAAA,IAAA;IAAAC,SAAA,EAAA,WAA0BC,KAAK,EAAK;MACxC,MAAMC,OAAO,CAAC5B,sBAAsB,CAAC;AAErC6B,MAAAA,GAAG,CAAC,IAAI,EAAE,OAAO,EAAEF,KAAK,CAAC;;AAEzB;MACA,IAAI,CAACA,KAAK,EAAE;AACV,QAAA,OAAOE,GAAG,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC;AACrC,MAAA;;AAEA;AACAA,MAAAA,GAAG,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,CAAC;AAE3B,MAAA,MAAM,IAAI,CAACC,aAAa,CAACP,MAAM,CAACQ,OAAO,CAACJ,KAAK,EAAE,IAAI,CAACK,cAAc,CAAC;AACrE,IAAA;AAAC,GAAA,CAAA,EAAA,IAAA,EAAA,QAAA,EAAA,aAAA,CAAA;AAEDC,EAAAA,SAAS,GAAAT,SAAA,CAAA,OAAA;IAAAC,OAAA,EAAA,IAAA;IAAAC,SAAA,EAAA,aAAoB;MAC3B,MAAME,OAAO,CAAC3B,mBAAmB,CAAC;AAElC4B,MAAAA,GAAG,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,CAAC;AAC9B,IAAA;AAAC,GAAA,CAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,CAAA;AAGDK,EAAAA,OAAOA,GAAG;AACRL,IAAAA,GAAG,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,CAAC;AAC7B,EAAA;AAAC,EAAA;AAAAM,IAAAA,CAAA,CAAA9B,IAAA,CAAAC,SAAA,cAHA8B,MAAM,CAAA,CAAA;AAAA;AAMPC,EAAAA,MAAMA,GAAG;AACP,IAAA,IAAI,CAACJ,SAAS,CAACF,OAAO,EAAE;AAC1B,EAAA;AAAC,EAAA;AAAAI,IAAAA,CAAA,CAAA9B,IAAA,CAAAC,SAAA,aAHA8B,MAAM,CAAA,CAAA;AAAA;AAIT;AAACE,oBAAA,CAAAC,QAAA,EArDoBrC,WAAW,CAAA;;;;"}